(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[876],{2341:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gamescreen",function(){return n(8111)}])},8111:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var r=n(5893),i=n(24),s=n(185),u=n.n(s),a=n(7294),o=n(2237),d=n(8239),c=n(1733),w=n(4420),l=n.n(w),h=n(5371);function f(e,t){let n=e.x-t.x,r=e.y-t.y;return 37.5>=Math.sqrt(n*n+r*r)}let m=()=>{let[e]=l()(c.D.images.rensyu1_png),[t]=l()(c.D.images.rensyu2_png),[n]=l()(c.D.images.rensyu3_png),[s]=(0,i.KO)(h.L),[w,m]=(0,a.useState)([100,300]),[y,p]=(0,a.useState)([]),[g,x]=(0,a.useState)({up:!1,down:!1,left:!1,right:!1}),[k,v]=(0,a.useState)(!1),[E,_]=(0,a.useState)(0),b=(0,a.useRef)(null),[L,A]=(0,a.useState)([{x:1e3,y:300,speedX:-120,status:1}]),j=async e=>{let t=g;switch(e.code){case"ArrowUp":t.up=!0,x(t);break;case"ArrowDown":t.down=!0,x(t);break;case"ArrowLeft":t.left=!0,x(t);break;case"ArrowRight":t.right=!0,x(t)}},D=e=>{"KeyZ"===e.code&&v(!0)},S=e=>{let t=g;switch(e.code){case"ArrowUp":t.up=!1,x(t);break;case"ArrowDown":t.down=!1,x(t);break;case"ArrowLeft":t.left=!1,x(t);break;case"ArrowRight":t.right=!1,x(t)}},M=e=>{"KeyZ"===e.code&&v(!1)},N=e=>{p(t=>t.filter(t=>!f(t,e)))},X=()=>{A(e=>e.filter(e=>{let t=y.some(t=>f(t,e));return!t||(N(e),!1)}))};(0,a.useEffect)(()=>{let e=setInterval(()=>{console.table(L)},200);return()=>{clearInterval(e)}},[L]),(0,a.useEffect)(()=>{let e=new(u()).Animation(e=>{if(!e)return;let t=e.timeDiff/1e3;C(),H(t),X()});return e.start(),b.current=e,()=>{e.stop()}});let C=()=>{m(e=>{let t=[Math.min(Math.max(e[0]+(g.left?-5:0)+(g.right?5:0),20),window.innerWidth-50),Math.min(Math.max(e[1]+(g.up?-5:0)+(g.down?5:0),0),window.innerHeight-50)];return t})},H=e=>{_(E+e),k&&E>.3&&(p(e=>[...e,{x:w[0]+54,y:w[1],speedX:2e3}]),_(0)),p(t=>t.map(t=>({...t,x:t.x+t.speedX*e})).filter(e=>e.x<window.innerWidth&&e.y<window.innerHeight))};return((0,a.useEffect)(()=>(document.addEventListener("keydown",j),document.addEventListener("keyup",S),document.addEventListener("keydown",D),document.addEventListener("keyup",M),()=>{document.removeEventListener("keydown",j),document.removeEventListener("keyup",S),document.removeEventListener("keydown",D),document.removeEventListener("keyup",M)})),s)?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.Hf,{width:window.innerWidth,height:window.innerHeight,children:(0,r.jsxs)(o.mh,{children:[(0,r.jsx)(o.Cd,{fill:"black",x:w[0],y:w[1],radius:50}),L.map((i,s)=>{let u=[e,t,n][i.status];return(0,r.jsx)(o.Ee,{image:u,x:i.x,y:i.y,width:100,height:100},s)}),y.map((e,t)=>(0,r.jsx)(o.Cd,{x:e.x,y:e.y,radius:5,fill:"yellow"},t))]})})}):(0,r.jsx)(d.g,{visible:!0})};var y=m}},function(e){e.O(0,[289,774,888,179],function(){return e(e.s=2341)}),_N_E=e.O()}]);